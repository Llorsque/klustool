<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Klusplanner ‚Äì Verhuizen</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">üõ†Ô∏è</div>
      <div>
        <div class="brand-title">Klusplanner</div>
        <div class="brand-sub">Overzicht ‚Ä¢ Toewijzen ‚Ä¢ Callsheets ‚Ä¢ Print/PDF</div>
      </div>
    </div>

    <nav class="tabs" aria-label="Navigatie">
      <button class="tab active" data-view="dashboard">Dashboard</button>
      <button class="tab" data-view="planning">Planning</button>
      <button class="tab" data-view="tasks">Klussen</button>
      <button class="tab" data-view="materials">Materialen</button>
      <button class="tab" data-view="people">Personen</button>
      <button class="tab" data-view="settings">Import/Export</button>
    </nav>
  </header>

  <main class="container">
    <!-- DASHBOARD -->
    <section id="view-dashboard" class="view">
      <div class="grid cards">
        <div class="card">
          <div class="card-label">Voortgang</div>
          <div class="card-value" id="kpi-progress">‚Äì</div>
          <div class="card-note" id="kpi-progress-note">‚Äì</div>
        </div>
        <div class="card">
          <div class="card-label">Uren (realistisch)</div>
          <div class="card-value" id="kpi-hours">‚Äì</div>
          <div class="card-note" id="kpi-hours-note">‚Äì</div>
        </div>
        <div class="card">
          <div class="card-label">Blokkades</div>
          <div class="card-value" id="kpi-blocked">‚Äì</div>
          <div class="card-note">Wacht op materiaal / hulp</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <h2>Komende planning (Ingepland / Bezig)</h2>
          <div class="panel-actions">
            <button class="btn" id="btn-add-task">+ Klus toevoegen</button>
          </div>
        </div>
        <div class="table-wrap">
          <table class="table" id="table-upcoming">
            <thead>
              <tr>
                <th>Klus</th>
                <th>Locatie</th>
                <th>Status</th>
                <th>Start</th>
                <th>Eind</th>
                <th>Uitvoerder 1</th>
                <th>Uitvoerder 2</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- TASKS -->
    <section id="view-tasks" class="view hidden">
      <div class="panel">
        <div class="panel-head">
          <h2>Alle klussen</h2>
          <div class="panel-actions">
            <button class="btn" id="btn-add-task-2">+ Klus toevoegen</button>
          </div>
        </div>

        <div class="filters">
          <input id="filter-search" type="search" placeholder="Zoek (titel, locatie)..." />
          <select id="filter-status"></select>
          <select id="filter-group"></select>
          <select id="filter-person"></select>
          <button class="btn secondary" id="btn-clear-filters">Reset filters</button>
        </div>

        <div class="table-wrap">
          <table class="table" id="table-tasks">
            <thead>
              <tr>
                <th>Klus</th>
                <th>Groep</th>
                <th>Locatie</th>
                <th>Status</th>
                <th>Uitvoerder 1</th>
                <th>Uitvoerder 2</th>
                <th>Start</th>
                <th>Eind</th>
                <th>Uren (R)</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Detail pane -->
      <section class="drawer hidden" id="drawer">
        <div class="drawer-head">
          <div>
<h3 id="drawer-title">‚Äì</h3>
          </div>
          <div class="drawer-actions">
            <button class="btn secondary" id="btn-print">Print callsheet</button>
            <button class="btn" id="btn-save">Opslaan</button>
            <button class="btn danger" id="btn-close">Sluiten</button>
          </div>
        </div>

        <div class="drawer-body">
          <div class="grid form">
            <div class="field">
              <label>Titel</label>
              <input id="f-title" type="text" />
            </div>
            <div class="field">
              <label>Project</label>
              <input id="f-project" type="text" />
            </div>
            <div class="field">
              <label>Groep</label>
              <input id="f-group" type="text" />
            </div>
            <div class="field">
              <label>Locatie</label>
              <input id="f-location" type="text" />
            </div>

            <div class="field">
              <label>Status</label>
              <select id="f-status"></select>
            </div>

            <div class="field">
              <label>Uitvoerder 1</label>
              <select id="f-exec1"></select>
            </div>
            <div class="field">
              <label>Uitvoerder 2</label>
              <select id="f-exec2"></select>
            </div>
            </div>

            <div class="field">
              <label>Start (datum & tijd)</label>
              <input id="f-start" type="datetime-local" />
            </div>
            <div class="field">
              <label>Eind (datum & tijd)</label>
              <input id="f-end" type="datetime-local" />
            </div>

            <div class="field">
              <label>Uren inschatting (optimistisch)</label>
              <input id="f-o" type="number" step="0.25" min="0" />
            </div>
            <div class="field">
              <label>Uren inschatting (realistisch)</label>
              <input id="f-r" type="number" step="0.25" min="0" />
            </div>
            <div class="field">
              <label>Uren inschatting (worst)</label>
              <input id="f-w" type="number" step="0.25" min="0" />
            </div>
            <div class="field">
              <label>Werkelijk bestede uren</label>
              <input id="f-actual" type="number" step="0.25" min="0" />
            </div>

            <div class="field full">
              <label>Definition of Done</label>
              <textarea id="f-dod" rows="2"></textarea>
            </div>

            <div class="field full">
              <label>Materialen (1 per regel: item | hoeveelheid | status)</label>
              <textarea id="f-materials" rows="5" placeholder="Acrylaatkit | 1 koker | kopen"></textarea>
              <div class="hint">Status-voorbeelden: in huis / kopen / onderweg / geregeld</div>
            </div>

            <div class="field full">
              <label>Tools (1 per regel)</label>
              <textarea id="f-tools" rows="4" placeholder="kitspuit"></textarea>
            </div>

            <div class="field full">
              <label>Stappenplan (1 per regel)</label>
              <textarea id="f-steps" rows="6" placeholder="Ontvetten"></textarea>
            </div>

            <div class="field full">
              <label>Notities</label>
              <textarea id="f-notes" rows="4"></textarea>
            </div>
          </div>
        </div>

        <!-- Print-only callsheet -->
        <article id="print-sheet" class="print-sheet" aria-hidden="true"></article>
      </section>
    </section>

    
    <!-- PLANNING -->
    <section id="view-planning" class="view hidden">
      <div class="panel">
        <div class="panel-head">
          <h2>Planning</h2>
          <div class="panel-actions">
            <div class="seg">
              <button class="seg-btn active" id="plan-mode-gantt" type="button">Balken</button>
              <button class="seg-btn" id="plan-mode-cal" type="button">Kalender</button>
            </div>
          </div>
        </div>

        <div class="planning-controls">
          <div class="seg">
            <button class="seg-btn active" id="zoom-month" type="button">Maand</button>
            <button class="seg-btn" id="zoom-week" type="button">Week</button>
            <button class="seg-btn" id="zoom-day" type="button">Dag</button>
          </div>

          <div class="plan-date">
            <button class="btn secondary" id="plan-prev" type="button">‚óÄ</button>
            <button class="btn secondary" id="plan-next" type="button">‚ñ∂</button>
            <button class="btn secondary" id="plan-today" type="button">Vandaag</button>
            <input type="date" id="plan-date" />
          </div>

          <div class="plan-legend">
            <span class="tag"><span class="dot good"></span> Afgerond</span>
            <span class="tag"><span class="dot warn"></span> Ingepland/Bezig/Wacht</span>
            <span class="tag"><span class="dot bad"></span> Backlog</span>
          </div>
        </div>

        <div id="planning-wrap">
          <!-- renders here -->
        </div>
      </div>
    </section>

<!-- MATERIALS -->
    <section id="view-materials" class="view hidden">
      <div class="panel">
        <div class="panel-head">
          <h2>Materialenlijst (geaggregeerd)</h2>
          <div class="panel-actions">
            <button class="btn secondary" id="btn-refresh-materials">Ververs</button>
          </div>
        </div>
        <p class="muted">Toont materialen uit klussen die niet ‚ÄúAfgerond‚Äù zijn. Handig voor 1x bouwmarkt.</p>
        <div class="table-wrap">
          <table class="table" id="table-materials">
            <thead>
              <tr>
                <th>Materiaal</th>
                <th>Hoeveelheid (samengevoegd)</th>
                <th>Status(sen)</th>
                <th>Klussen</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- PEOPLE -->
    <section id="view-people" class="view hidden">
      <div class="panel">
        <div class="panel-head">
          <h2>Personen</h2>
          <div class="panel-actions">
            <button class="btn" id="btn-add-person">+ Persoon toevoegen</button>
          </div>
        </div>
        <p class="muted">Deze lijst is los van je klussen. IDs blijven stabiel, namen kun je aanpassen.</p>

        <div class="table-wrap">
          <table class="table" id="table-people">
            <thead>
              <tr>
                <th>ID</th>
                <th>Naam</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="view-settings" class="view hidden">
      <div class="panel">
        <div class="panel-head">
          <h2>Import / Export</h2>
        </div>

        <div class="grid cards">
          <div class="card">
            <div class="card-label">Export</div>
            <div class="card-note">Download je huidige data (klussen + personen) als √©√©n JSON-bestand.</div>
            <button class="btn" id="btn-export">Export JSON</button>
          </div>
          <div class="card">
            <div class="card-label">Import</div>
            <div class="card-note">Importeer een eerder exportbestand (overschrijft huidige data).</div>
            <input type="file" id="file-import" accept="application/json" />
            <button class="btn" id="btn-import">Import JSON</button>
          </div>
          <div class="card">
            <div class="card-label">Reset</div>
            <div class="card-note">Zet alles terug naar de meegeleverde startdata.</div>
            <button class="btn danger" id="btn-reset">Reset naar defaults</button>
          </div>
        </div>

        <div class="panel subtle">
          <h3>Tip: PDF export per klus</h3>
          <p>Open een klus ‚Üí klik <strong>Print callsheet</strong> ‚Üí kies <em>Opslaan als PDF</em> in je printmenu.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="muted">Data wordt lokaal opgeslagen in je browser (localStorage). Je kunt altijd exporteren/importeren.</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
